<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="utf-8"><link rel="icon" type="image/jpg" href="/favicon.webp"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.16.5"><script lang="javascript">
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js",
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-M6RFWPQD");
</script><meta name="title" content="M. Moeen - TypeORM Essentials"><meta name="description" content="TypeORM is one the most well-known ORMs in NodeJS world. This article walks through its essentials."><meta property="og:title" content="M. Moeen - TypeORM Essentials"><meta property="og:description" content="TypeORM is one the most well-known ORMs in NodeJS world. This article walks through its essentials."><meta property="og:image" content="https://moeenn.github.io/logo.webp"><meta property="og:url" content="https://moeenn.github.io/blogs/undefined"><meta property="og:site_name" content="M. Moeen - TypeORM Essentials"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://moeenn.github.io/blogs/undefined"><meta property="twitter:title" content="M. Moeen - TypeORM Essentials"><meta property="twitter:image" content="https://moeenn.github.io/logo.webp"><meta property="twitter:description" content="TypeORM is one the most well-known ORMs in NodeJS world. This article walks through its essentials."><title>M. Moeen - TypeORM Essentials</title><link rel="stylesheet" href="/assets/blogs.yrwcaugX.css"></head> <body class="text-black bg-stone-50 h-screen flex flex-col"> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M6RFWPQD" height="0" width="0" style="display:none;visibility:hidden">
	</iframe></noscript> <div class="container max-w-6xl mx-auto px-6 lg:px-10">  <nav> <div class="pt-8 pb-4 flex justify-between"> <a class="my-auto cursor-pointer" href="/#"> <span class="font-mono pb-1 pt-2 font-bold text-white bg-gray-900 px-3 py-1 rounded">M.M</span> </a> <div class="block md:hidden"> <div class="flex space-x-2"> <a href="https://github.com/moeenn" target="_blank" class="my-auto hover:bg-gray-200 transition-colors rounded-full h-10 w-10 inline-flex" title="Github"> <svg class="size-6 m-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"> <rect width="256" height="256" fill="none"></rect><path d="M119.83,56A52,52,0,0,0,76,32a51.92,51.92,0,0,0-3.49,44.7A49.28,49.28,0,0,0,64,104v8a48,48,0,0,0,48,48h48a48,48,0,0,0,48-48v-8a49.28,49.28,0,0,0-8.51-27.3A51.92,51.92,0,0,0,196,32a52,52,0,0,0-43.83,24Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M104,232V192a32,32,0,0,1,32-32h0a32,32,0,0,1,32,32v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M104,208H72a32,32,0,0,1-32-32A32,32,0,0,0,8,144" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path> </svg> </a> <a href="https://www.linkedin.com/in/moeenn" target="_blank" class="my-auto hover:bg-gray-200 transition-colors rounded-full h-10 w-10 inline-flex" title="LinkedIn"> <svg class="size-6 m-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><rect x="32" y="32" width="192" height="192" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></rect><line x1="120" y1="112" x2="120" y2="176" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="88" y1="112" x2="88" y2="176" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><path d="M120,140a28,28,0,0,1,56,0v36" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><circle cx="88" cy="84" r="12"></circle></svg> </a> <div data-navbutton class="hover:bg-gray-200 rounded p-2 cursor-pointer"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="text-gray-700 h-6 w-6"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5"></path> </svg> </div> </div> </div> <div class="hidden md:flex md:space-x-2"> <a href="/#work-history" class="px-3 py-2 text-black text-sm my-auto border-b-2 border-transparent hover:border-black hover:bg-gray-200 rounded-t transition-colors"> Work History </a><a href="/#projects" class="px-3 py-2 text-black text-sm my-auto border-b-2 border-transparent hover:border-black hover:bg-gray-200 rounded-t transition-colors"> Projects </a><a href="/#tools" class="px-3 py-2 text-black text-sm my-auto border-b-2 border-transparent hover:border-black hover:bg-gray-200 rounded-t transition-colors"> Skills &amp; Tools </a><a href="/#contact" class="px-3 py-2 text-black text-sm my-auto border-b-2 border-transparent hover:border-black hover:bg-gray-200 rounded-t transition-colors"> Contact Me </a> <a href="/blogs" class="px-3 py-2 font-bold text-black text-sm my-auto hover:bg-gray-200 border-b-2 border-transparent hover:border-black rounded-t transition-colors">
Blogs
</a> <div class="flex px-2"> <span class="my-auto text-gray-300">|</span> </div> <div class="flex space-x-2"> <a href="https://github.com/moeenn" target="_blank" class="my-auto hover:bg-gray-200 transition-colors rounded-full h-10 w-10 inline-flex" title="Github"> <svg class="size-6 m-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"> <rect width="256" height="256" fill="none"></rect><path d="M119.83,56A52,52,0,0,0,76,32a51.92,51.92,0,0,0-3.49,44.7A49.28,49.28,0,0,0,64,104v8a48,48,0,0,0,48,48h48a48,48,0,0,0,48-48v-8a49.28,49.28,0,0,0-8.51-27.3A51.92,51.92,0,0,0,196,32a52,52,0,0,0-43.83,24Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M104,232V192a32,32,0,0,1,32-32h0a32,32,0,0,1,32,32v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M104,208H72a32,32,0,0,1-32-32A32,32,0,0,0,8,144" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path> </svg> </a> <a href="https://www.linkedin.com/in/moeenn" target="_blank" class="my-auto hover:bg-gray-200 transition-colors rounded-full h-10 w-10 inline-flex" title="LinkedIn"> <svg class="size-6 m-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><rect x="32" y="32" width="192" height="192" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></rect><line x1="120" y1="112" x2="120" y2="176" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="88" y1="112" x2="88" y2="176" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><path d="M120,140a28,28,0,0,1,56,0v36" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><circle cx="88" cy="84" r="12"></circle></svg> </a> </div> </div> </div> <div data-mobilemenu class="hidden"> <div class="flex flex-col md:hidden bg-gray-100 rounded"> <a href="/#work-history" class="px-3 py-4 text-black leading-none hover:bg-gray-300 text-sm my-auto transition-colors mb-0 rounded"> Work History </a><a href="/#projects" class="px-3 py-4 text-black leading-none hover:bg-gray-300 text-sm my-auto transition-colors mb-0 rounded"> Projects </a><a href="/#tools" class="px-3 py-4 text-black leading-none hover:bg-gray-300 text-sm my-auto transition-colors mb-0 rounded"> Skills &amp; Tools </a><a href="/#contact" class="px-3 py-4 text-black leading-none hover:bg-gray-300 text-sm my-auto transition-colors mb-0 rounded"> Contact Me </a> <a href="/blogs" class="px-3 py-4 text-black leading-none hover:bg-gray-300 text-sm my-auto transition-colors mb-0 rounded">
Blogs
</a> </div> </div> </nav> <script src="/scripts/navbar.js" defer></script>  </div> <main class="flex-1">  <div class="container max-w-6xl mx-auto px-6 lg:px-10">  <div class="pt-8 pb-14"> <div class="pb-8"> <a href="/blogs" class="text-sm bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-full inline-flex space-x-2"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 my-auto"> <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path> </svg> <span class="my-auto leading-none">Back</span></a> </div> <h2 class="text-2xl space-x-2 mb-4"> <span class="font-normal text-gray-500">#</span> <span class="text-gray-900">TypeORM Essentials</span> </h2> <div class="flex flex-wrap gap-2 mb-6"> <span class="border-r-2 border-stone-300 pr-4 mr-2 text-sm my-auto text-stone-700"> December 19, 2025 </span> <span class="text-xs bg-gray-200 hover:bg-gray-300 rounded px-2 py-1"> Javascript </span> <span class="text-xs bg-gray-200 hover:bg-gray-300 rounded px-2 py-1"> Node </span><span class="text-xs bg-gray-200 hover:bg-gray-300 rounded px-2 py-1"> ORM </span><span class="text-xs bg-gray-200 hover:bg-gray-300 rounded px-2 py-1"> Database </span><span class="text-xs bg-gray-200 hover:bg-gray-300 rounded px-2 py-1"> Typescript </span> </div> <div class="grid grid-cols-1 xl:grid-cols-4"> <div class="xl:order-last xl:pl-6 h-full"> <div class="xl:sticky xl:top-4"> <p class="font-medium text-gray-700 mb-2">
Table of content
</p> <a data-level="2" href="#basic-crud-example" style="margin-left: 0rem" class="block text-sm pb-1 hover:underline underline-offset-4"> Basic CRUD example </a><a data-level="2" href="#relationships" style="margin-left: 0rem" class="block text-sm pb-1 hover:underline underline-offset-4"> Relationships </a><a data-level="3" href="#one-to-one-mandatory" style="margin-left: 0.75rem" class="block text-sm pb-1 hover:underline underline-offset-4"> One-to-one (mandatory) </a><a data-level="3" href="#one-to-one-optional" style="margin-left: 0.75rem" class="block text-sm pb-1 hover:underline underline-offset-4"> One-to-one (optional) </a><a data-level="3" href="#one-to-many" style="margin-left: 0.75rem" class="block text-sm pb-1 hover:underline underline-offset-4"> One-to-many </a><a data-level="3" href="#many-to-many" style="margin-left: 0.75rem" class="block text-sm pb-1 hover:underline underline-offset-4"> Many-to-many </a><a data-level="3" href="#self-referencing-relations" style="margin-left: 0.75rem" class="block text-sm pb-1 hover:underline underline-offset-4"> Self-referencing relations </a> </div> </div> <div class="xl:order-first xl:col-span-3 prose-xl prose-p:leading-relaxed prose-p:text-base prose-li:leading-relaxed prose-li:text-base prose-li:p-0 prose-li:my-1 prose-h1:text-3xl prose-h2:text-2xl prose-h3:text-xl prose-h4:text-lg prose-h4:text-md prose-headings:mb-2 prose-headings:mt-12 prose-headings:scroll-mt-4 prose-pre:mt-2 prose-pre:text-base prose-pre:leading-6 prose-ul:list-disc prose-table:border prose-table:border-gray-300 prose-table:w-full prose-table:mb-10 prose-tr:border prose-tr:border-gray-300 prose-th:border-x prose-th:border-gray-300 prose-th:py-1 prose-th:bg-gray-100 prose-td:border-x prose-td:border-gray-300 prose-td:py-1"> <p class="mt-8 xl:mt-0">TypeORM is one the most well-known ORMs in NodeJS world. This article walks through its essentials.</p> <h2 id="basic-crud-example">Basic CRUD example</h2>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> UserRole</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./UserRole</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> unique</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> enum</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> UserRole </span><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	role</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserRole</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">	// custom constructors are not mandatory.</span></span>
<span class="line"><span style="color:#C792EA">	public</span><span style="color:#C792EA"> constructor</span><span style="color:#89DDFF">(</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		role</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserRole</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> UserRole</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">USER</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">	)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">email</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> email</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">password</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> password</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">role</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> role</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<p><strong>Note</strong>: TypeORM also has a <code>PrimaryGeneratedColumn</code> decorator. We can use that instead of <code>PrimaryColumn</code> decorator if we don’t want to generate an entity’s <code>uuid</code> in our application (i.e. and rather have the db auto generate it for us).</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> enum</span><span style="color:#FFCB6B"> UserRole</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">	ADMIN </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">ADMIN</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	USER </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">USER</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Repository</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> In</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> User</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">../src/entity/User</span><span style="color:#89DDFF">"</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Paginated</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./paginated</span><span style="color:#89DDFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> UserRepository</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> constructor</span><span style="color:#89DDFF">(</span></span>
<span class="line"><span style="color:#C792EA">        private</span><span style="color:#C792EA"> readonly</span><span style="color:#BABED8;font-style:italic"> userSource</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Repository</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">>,</span></span>
<span class="line"><span style="color:#89DDFF">    )</span><span style="color:#89DDFF"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> all</span><span style="color:#89DDFF">():</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">find</span><span style="color:#F07178">()</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> listPaginated</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">take</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> skip</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">Paginated</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">>></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#C792EA">        const</span><span style="color:#89DDFF"> [</span><span style="color:#BABED8">data</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> count</span><span style="color:#89DDFF">]</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findAndCount</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#BABED8"> skip</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> take</span><span style="color:#89DDFF"> }</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> data</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> count</span><span style="color:#89DDFF"> }</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> findById</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">userId</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#BABED8">[</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">id</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOneBy</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> userId</span><span style="color:#89DDFF"> }</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> findByEmail</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> email</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF"> }</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> create</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">user</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        try</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">            return</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#F07178">(</span><span style="color:#BABED8">user</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span><span style="color:#89DDFF;font-style:italic"> catch</span><span style="color:#F07178"> (</span><span style="color:#BABED8">err</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#89DDFF">            this.</span><span style="color:#82AAFF">handleConstraintViolations</span><span style="color:#F07178">(</span><span style="color:#BABED8">err</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> createMany</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">users</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        try</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">            await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">insert</span><span style="color:#F07178">(</span><span style="color:#BABED8">users</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span><span style="color:#89DDFF;font-style:italic"> catch</span><span style="color:#F07178"> (</span><span style="color:#BABED8">err</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#89DDFF">            this.</span><span style="color:#82AAFF">handleConstraintViolations</span><span style="color:#F07178">(</span><span style="color:#BABED8">err</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">        const</span><span style="color:#BABED8"> ids</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> users</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">map</span><span style="color:#F07178">(</span><span style="color:#BABED8;font-style:italic">u</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> u</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">id</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">find</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#82AAFF"> In</span><span style="color:#F07178">(</span><span style="color:#BABED8">ids</span><span style="color:#F07178">) </span><span style="color:#89DDFF">}</span><span style="color:#89DDFF"> }</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> update</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">user</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Partial</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">>):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">User</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        try</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">            await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">update</span><span style="color:#F07178">(</span><span style="color:#BABED8">user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">id</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> user</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span><span style="color:#89DDFF;font-style:italic"> catch</span><span style="color:#F07178"> (</span><span style="color:#BABED8">err</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#89DDFF">            this.</span><span style="color:#82AAFF">handleConstraintViolations</span><span style="color:#F07178">(</span><span style="color:#BABED8">err</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">        }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        return</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">id</span><span style="color:#89DDFF"> }}</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    public</span><span style="color:#C792EA"> async</span><span style="color:#F07178"> remove</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">userId</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#BABED8">[</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">id</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">]</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> Promise</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">void</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        await</span><span style="color:#89DDFF"> this.</span><span style="color:#BABED8">userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">delete</span><span style="color:#F07178">(</span><span style="color:#BABED8">userId</span><span style="color:#F07178">)</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">    private</span><span style="color:#F07178"> handleConstraintViolations</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">err</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> unknown</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> never</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">        if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">err</span><span style="color:#89DDFF"> instanceof</span><span style="color:#FFCB6B"> Error</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#C792EA">            const</span><span style="color:#BABED8"> message</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> err</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">message</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">            // handle email unique constraint.</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">            if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">message</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">includes</span><span style="color:#F07178">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">UNIQUE constraint</span><span style="color:#89DDFF">"</span><span style="color:#F07178">) </span><span style="color:#89DDFF">&#x26;&#x26;</span><span style="color:#BABED8"> message</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">includes</span><span style="color:#F07178">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">user.email</span><span style="color:#89DDFF">"</span><span style="color:#F07178">)) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">                throw</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Error</span><span style="color:#F07178">(</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">User with this email already exists")</span></span>
<span class="line"><span style="color:#C3E88D">            }</span></span>
<span class="line"><span style="color:#C3E88D">        }</span></span>
<span class="line"><span style="color:#C3E88D">        throw err</span></span>
<span class="line"><span style="color:#C3E88D">    }</span></span>
<span class="line"><span style="color:#C3E88D">}</span></span></code></pre>
<h2 id="relationships">Relationships</h2>
<h3 id="one-to-one-mandatory">One-to-one (mandatory)</h3>
<p>Consider a <code>User</code> has one <code>UserProfile</code>. <code>User</code> must always have a <code>UserProfile</code> and it is not optional.</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">	Column</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	Entity</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	JoinColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	OneToOne</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	PrimaryGeneratedColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> UserRole</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./UserRole</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> UserProfile</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./UserProfile</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryGeneratedColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> unique</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> enum</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> UserRole </span><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	role</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserRole</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> UserProfile</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">profile</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> profile</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">user</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> cascade</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">JoinColumn</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	profile</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserProfile</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	public</span><span style="color:#C792EA"> constructor</span><span style="color:#89DDFF">(</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		role</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserRole</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> UserRole</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">USER</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">	)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">email</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> email</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">password</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> password</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">role</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> role</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> OneToOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> User</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./User</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> UserProfile</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> User</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">user</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">profile)</span></span>
<span class="line"><span style="color:#F07178">	user</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">address</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> address</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> userSource </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getRepository</span><span style="color:#BABED8">(User)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> user </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> User</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">one@site.com</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">asjcbaskjcb</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> profile </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> UserProfile</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">One</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123 Main street</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">profile </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> profile</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// profile is saved together with the user because cascades are enabled in</span></span>
<span class="line"><span style="color:#676E95;font-style:italic">// the user entity.</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> createdUsers </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">(user)</span><span style="color:#89DDFF">;</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> userWithProfile </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> userSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">&#x3C;id></span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#F07178">	relations</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> profile</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<p><strong>Note</strong>:</p>
<ul>
<li>Only one side of the relationship can have cascades enabled.</li>
<li>In the above example, <code>User</code> table has cascades enabled. This means that we will be able to insert <code>User</code> with <code>UserProfile</code> in one go.</li>
</ul>
<h3 id="one-to-one-optional">One-to-one (optional)</h3>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Index</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> OneToOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> UserProfile</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./UserProfile</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> unique</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Index</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> UserProfile</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">profile</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> profile</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">user</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> cascade</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	profile</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> UserProfile</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	public</span><span style="color:#C792EA"> constructor</span><span style="color:#89DDFF">(</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		email</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		password</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8;font-style:italic">		profile</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> UserProfile</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> undefined</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">	)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">email</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> email</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">password</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> password</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">profile</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> profile</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">	// hide password field in JSON serialization.</span></span>
<span class="line"><span style="color:#F07178">	toJSON</span><span style="color:#89DDFF">()</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">		return</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">			...this,</span></span>
<span class="line"><span style="color:#F07178">			password</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> undefined,</span></span>
<span class="line"><span style="color:#89DDFF">		};</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">	Column</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	Entity</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	JoinColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	OneToOne</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	PrimaryGeneratedColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> User</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./User</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> UserProfile</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryGeneratedColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> User</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">user</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">profile)</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">JoinColumn</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	user</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> User</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">address</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> address</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<p><strong>Note</strong>: In the above examples, the only difference is in where the <code>@JoinColumn()</code> decorator is placed. If we need mandatory one-to-one, decorator is placed on the <code>User</code> table. If we want optional one-to-one, it will be placed on the <code>UserProfile</code> table. This make perfect sense in terms of SQL as well.</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> user </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> User</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">admin@site.com</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">scnaskcjback</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> profile </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> UserProfile</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Admin</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">123 Main street</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">user</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">profile </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> profile</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// this works because cascade is added in User entity.</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedUser </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">(user)</span><span style="color:#89DDFF">;</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedUser </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">find</span><span style="color:#BABED8">(User</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> email</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">admin@site.com</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#F07178">	relations</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> profile</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<h3 id="one-to-many">One-to-many</h3>
<p>Consider a <code>Business</code> can have many branches. We can model it as follows in TypeORM.</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> OneToMany</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Branch</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Branch</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Business</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToMany</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Branch</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">branch</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> branch</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">business</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> cascade</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	branches</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Branch</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> branches</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Branch</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">branches</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> branches</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> ManyToOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Business</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Business</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">node:crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Branch</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">ManyToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Business</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">business</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> business</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">branches)</span></span>
<span class="line"><span style="color:#F07178">	business</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Business</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> address</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">address</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> address</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedBusiness </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#BABED8">(Business</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">&#x3C;id></span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#F07178">	relations</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> branches</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> branchOne </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Branch</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Branch 1</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Address 1</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> branchTwo </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Branch</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Branch 2</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Address 2</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> business </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Business</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Awesome business</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> [branchOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> branchTwo])</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// branches are saved with business because cascades are enabled in</span></span>
<span class="line"><span style="color:#676E95;font-style:italic">// the Business entity.</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedBusiness </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">(business)</span><span style="color:#89DDFF">;</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#676E95;font-style:italic">// saving a new branch under existing business.</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedBusiness </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#BABED8">(Business</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">&#x3C;id></span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> newBranch </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Branch</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Brand new branch</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">Some random address</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">newBranch</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">business </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> savedBusiness</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedNewBranch </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">(newBranch)</span><span style="color:#89DDFF">;</span></span></code></pre>
<h3 id="many-to-many">Many-to-many</h3>
<p>Consider that a <code>Lecture</code> can have many <code>Student</code> and <code>Student</code> can have many lectures.</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> JoinTable</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> ManyToMany</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Student</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Student</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Lecture</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">ManyToMany</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Student</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">student</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> student</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">lectures</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> cascade</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">JoinTable</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	students</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Student</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> students</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Student</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">students</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> students</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Column</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> Entity</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> ManyToMany</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> PrimaryColumn</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Lecture</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Lecture</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Student</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> unique</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	rollNumber</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">ManyToMany</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Lecture</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">lecture</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> lecture</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">students)</span></span>
<span class="line"><span style="color:#F07178">	lectures</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Lecture</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">name</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> rollNumber</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">name</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> name</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">rollNumber</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> rollNumber</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedLectures </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">find</span><span style="color:#BABED8">(Student</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	relations</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">		lectures</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">	},</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// OR</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> lectureRepo </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getRepository</span><span style="color:#BABED8">(Lecture)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedLectures </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> lectureRepo</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">find</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#F07178">	relations</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">		students</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">	},</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<p><strong>Note</strong>: Both above styles are valid, use whichever you prefer.</p>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> studentOne </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Student</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Student one</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">A-01</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> studentTwo </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Student</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Student two</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">A-02</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> studentThree </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Student</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Student three</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">A-03</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">([studentOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> studentTwo</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> studentThree])</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> lectureOne </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Lecture</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Lecture one</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> [studentOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> studentTwo])</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> lectureTwo </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Lecture</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Lecture two</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> [studentOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> studentThree])</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">([lectureOne</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> lectureTwo])</span><span style="color:#89DDFF">;</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#676E95;font-style:italic">// create new student and enroll in existing lecture.</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedLecture </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#BABED8">(Lecture</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">389963d8-a558-4869-8d06-b6eafdfd71ca</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> newStudent </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Student</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">New Student</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">casbckj</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">newStudent</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">lectures </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> [savedLecture]</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> savedStudent </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">(newStudent)</span><span style="color:#89DDFF">;</span></span></code></pre>
<h3 id="self-referencing-relations">Self-referencing relations</h3>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">	Column</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	Entity</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	JoinColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	ManyToOne</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	OneToMany</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	PrimaryColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Comment</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Comment</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Post</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	title</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToMany</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Comment</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">comment</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> comment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">post)</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">JoinColumn</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	comments</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Comment</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">title</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">title</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> title</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">	Column</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	Entity</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	ManyToMany</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	ManyToOne</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	OneToMany</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">	PrimaryColumn</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">typeorm</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Post</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">./Post</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">crypto</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">@</span><span style="color:#82AAFF">Entity</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#C792EA"> class</span><span style="color:#FFCB6B"> Comment</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">PrimaryColumn</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">uuid</span><span style="color:#89DDFF">"</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	id</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> webcrypto</span><span style="color:#89DDFF">.</span><span style="color:#F07178">randomUUID</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">()</span></span>
<span class="line"><span style="color:#F07178">	text</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">ManyToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Post</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">post</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> post</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">comments)</span></span>
<span class="line"><span style="color:#F07178">	post</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Post</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">	// this column is not mandatory but helpful to have here.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic">	// it has the same name as parentComment relations auto-generated column.</span></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">Column</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178"> nullable</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	parentCommentId</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">ManyToOne</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Comment</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">comment</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> comment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">children</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> nullable</span><span style="color:#89DDFF">:</span><span style="color:#FF9CAC"> true</span><span style="color:#89DDFF"> }</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#F07178">	parentComment</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> Comment</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">	@</span><span style="color:#82AAFF">OneToMany</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> Comment</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">comment</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> comment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">parentComment)</span></span>
<span class="line"><span style="color:#F07178">	children</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Comment</span><span style="color:#BABED8">[]</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">	constructor</span><span style="color:#89DDFF">(</span><span style="color:#BABED8;font-style:italic">text</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> parentCommentId</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> string</span><span style="color:#89DDFF">)</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">text</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> text</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">		this.</span><span style="color:#BABED8">parentCommentId</span><span style="color:#89DDFF"> =</span><span style="color:#BABED8"> parentCommentId</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">	}</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<pre class="astro-code material-theme-palenight" style="background-color:#292D3E;color:#babed8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> foundPost </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF;font-style:italic"> await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">findOne</span><span style="color:#BABED8">(Post</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">	where</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span><span style="color:#F07178"> id</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> "</span><span style="color:#C3E88D">&#x3C;id></span><span style="color:#89DDFF">"</span><span style="color:#89DDFF"> },</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> newComment </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Comment</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Root comment</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> undefined</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">newComment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">post </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> foundPost</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> childComment </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> new</span><span style="color:#82AAFF"> Comment</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">Child comment</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> newComment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">id)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">childComment</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">post </span><span style="color:#89DDFF">=</span><span style="color:#BABED8"> foundPost</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">await</span><span style="color:#BABED8"> AppDataSource</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">manager</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">save</span><span style="color:#BABED8">([newComment</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> childComment])</span><span style="color:#89DDFF">;</span></span></code></pre> </div> </div> </div>  </div>  </main> <footer class="py-4 bg-gray-200 text-gray-500"> <div class="container max-w-6xl mx-auto px-6 lg:px-10">  <div class="flex"> <span class="text-sm mx-auto">© 2026 - Muhammad Moeen</span> </div>  </div> </footer> <div data-scrollbuttoncontainer class="transition-all duration-300 opacity-0 cursor-pointer"> <button data-scrollbutton title="Go To Top" class="fixed z-90 bottom-8 right-8 border-0 w-12 h-12 rounded-full drop-shadow-md bg-black text-white text-3xl font-bold"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 m-auto"> <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"></path> </svg> </button> </div> <script src="/scripts/scrolltop.js" defer></script> </body></html>